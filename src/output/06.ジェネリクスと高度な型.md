# 06.ジェネリクスと高度な型

### 06.ジェネリクスと高度な型

TypeScriptにおいて、ジェネリクスは型の再利用性を高めるための強力な機能です。これにより、開発者はリユーサブルなコードを記述しつつ、型安全性を維持することができます。また、高度な型は、より複雑なデータ構造に対して型を定義するための手段を提供します。この章では、ジェネリクスと高度な型の基本概念、利用方法、具体的な例を交え、Pythonとの対比も行います。

#### 6.1 ジェネリクスとは

ジェネリクスは、関数やクラス、インターフェースを型に依存しない形で定義することを可能にします。これにより、異なる型に対して同じロジックを再利用できるため、コードの冗長性を減少させ、有効な型チェックを実施できます。

##### ジェネリクスの基本的な使用法
以下は、ジェネリクスを使った関数の例です。

```typescript
function identity<T>(arg: T): T {
    return arg;
}

const output1 = identity<string>("Hello, TypeScript!"); // string型
const output2 = identity<number>(42); // number型
```

ここでは、`identity`関数は任意の型`T`を受け取ることができ、型安全が保証されています。

#### 6.2 ジェネリクスの応用例

ジェネリクスは、配列やオブジェクトの操作に非常に便利です。以下に配列のアイテムを取り出す関数の例を示します。

```typescript
function getFirstElement<T>(arr: T[]): T | undefined {
    return arr[0];
}

const firstNumber = getFirstElement<number>([1, 2, 3]);
const firstString = getFirstElement<string>(["Alice", "Bob"]);
```

さらなる応用として、インターフェースや型エイリアスでもジェネリクスを使用することができます。

```typescript
interface Box<T> {
    content: T;
}

const stringBox: Box<string> = { content: "Hello, World!" };
const numberBox: Box<number> = { content: 100 };
```

これにより、型安全が保たれたまま柔軟なデータ構造を作成できます。

#### 6.3 高度な型

TypeScriptでは、高度な型を用いて複雑なデータの型を定義することができます。これには、ユニオン型、交差型、条件型が含まれます。

##### ユニオン型
ユニオン型は、複数の異なる型を一つの型として表現します。

```typescript
function printId(id: number | string) {
    console.log(`ID: ${id}`);
}

printId(101); //番号
printId("202"); //文字列
```

##### 交差型
交差型は、複数の型を組み合わせて一つの型を作成します。これにより、異なる型のプロパティを持つオブジェクトを定義できます。

```typescript
interface Person {
    name: string;
}

interface Employee {
    employeeId: number;
}

type Worker = Person & Employee;

const worker: Worker = {
    name: "Alice",
    employeeId: 1,
};
```

##### 条件型
条件型は、型の条件によって異なる型を決定するために使用されます。条件型は、特定の条件に基づいて型を選択することを可能にします。

```typescript
type IsString<T> = T extends string ? "Yes" : "No";

type Test1 = IsString<string>; // "Yes"
type Test2 = IsString<number>; // "No"
```

#### 6.4 Pythonとの対比

Pythonでは、型ヒントやジェネリクスを使用することができますが、TypeScriptの型システムはより静的で厳格なため、型不一致のチェックが強力です。Pythonは動的型付けであり、実行時に型が決まるため、ランタイムエラーが発生する可能性もあります。

##### Pythonでのジェネリクスの例
```python
from typing import TypeVar, List

T = TypeVar('T')

def get_first_element(arr: List[T]) -> T:
    return arr[0]

first = get_first_element([1, 2, 3])  # ランタイムエラーのリスクを伴う
```

Pythonでも型推論やジェネリクスを扱えますが、TypeScriptの型システムは、特に型安全性に重点を置いている点が違います。

#### 6.5 まとめ

ジェネリクスと高度な型は、TypeScriptが提供する強力な機能であり、コードの再利用性を高めるだけでなく、型安全性をもたらします。これにより、開発者は冗長なコードを減らし、より堅牢なシステムを構築できるようになります。今後の章では、TypeScriptにおけるクラスとオブジェクト指向についてさらに詳しく探索していきます。

