# 03.インターフェースと型エイリアス

### 03.インターフェースと型エイリアス

TypeScriptにおいて、インターフェースと型エイリアスは、データ構造の型を定義するための重要な機能です。この章では、インターフェースと型エイリアスの違いやそれぞれの使用例、さらにはPythonとの対比を通じて理解を深めていきます。

#### 3.1 インターフェースとは

インターフェースは、オブジェクトの形状や構造を定義するための手段です。クラスやオブジェクトが持つべきプロパティやメソッドを定義することで、型の契約を提供します。

##### インターフェースの定義
以下は、インターフェースを定義し、そのインターフェースに従ったオブジェクトを作成する例です。

```typescript
interface User {
    name: string;
    age: number;
    greet: () => void;
}

const user: User = {
    name: "Alice",
    age: 30,
    greet: () => {
        console.log(`Hello, my name is ${this.name}`);
    }
};
```

#### 3.2 型エイリアスとは

型エイリアスは、既存の型に名前をつけることで、再利用や可読性を向上させるための機能です。特に、複雑な型や一時的な構造を表現する際に便利です。

##### 型エイリアスの定義
以下は、型エイリアスを定義し、使用する例です。

```typescript
type User = {
    name: string;
    age: number;
    greet: () => void;
};

const user: User = {
    name: "Alice",
    age: 30,
    greet: () => {
        console.log(`Hello, my name is ${this.name}`);
    }
};
```

##### インターフェースと型エイリアスの違い
インターフェースと型エイリアスは似たような役割を果たしますが、いくつかの重要な違いがあります。

1. **拡張性**: インターフェースは、他のインターフェースを拡張することができ、オブジェクト指向プログラミングにおいてコードの再利用が容易です。
   ```typescript
   interface Animal {
       name: string;
   }

   interface Dog extends Animal {
       bark: () => void;
   }
   ```

2. **ユニオン型の定義**: 型エイリアスは、ユニオン型や交差型など、より複雑な型を定義するのに使えます。
   ```typescript
   type StringOrNumber = string | number;
   ```

3. **宣言のマージ**: インターフェースは、同じ名前で複数回宣言することができ、合併されますが、型エイリアスにはこの機能はありません。

#### 3.3 インターフェースと型エイリアスの使用例

両者の使い分けが重要ですが、状況に応じて役立つ方法が異なります。

1. **インターフェースの使用例**: 複数の異なるオブジェクトに共通の契約を持たせる場合、インターフェースが適しています。

   ```typescript
   interface Shape {
       area: () => number;
   }

   class Circle implements Shape {
       constructor(public radius: number) {}
       area() {
           return Math.PI * this.radius * this.radius;
       }
   }

   class Square implements Shape {
       constructor(public side: number) {}
       area() {
           return this.side * this.side;
       }
   }
   ```

2. **型エイリアスの使用例**: 複雑なデータ構造や、ユニオン型を扱いたい場合、型エイリアスが便利です。

   ```typescript
   type Response = {
       success: boolean;
       data?: User;
       error?: string;
   };

   function handleResponse(response: Response) {
       if (response.success) {
           console.log(`User: ${response.data?.name}`);
       } else {
           console.error(`Error: ${response.error}`);
       }
   }
   ```

#### 3.4 Pythonとの対比

Pythonでは、データクラスや辞書を用いてオブジェクトの構造を表現しますが、インターフェースや型エイリアスの概念は明示的ではありません。Python 3.6以降、型ヒント（typingモジュール）を使用することで、似たような機能を持ち込むことができます。

##### Pythonにおけるデータクラスの例
```python
from dataclasses import dataclass

@dataclass
class User:
    name: str
    age: int

user = User(name="Alice", age=30)
```

##### Pythonの型ヒントの使用
```python
from typing import Union

Response = Union[User, str]

def handle_response(response: Response):
    if isinstance(response, User):
        print(f"User: {response.name}")
    else:
        print(f"Error: {response}")
```

#### 3.5 まとめ

インターフェースと型エイリアスは、TypeScriptにおいてデータ構造を定義するための強力なツールです。それぞれの特徴を理解し、使い分けることで、より効果的に型安全なプログラムを構築できます。次の章では、型推論やユーティリティ型について詳しく探求していきます。

